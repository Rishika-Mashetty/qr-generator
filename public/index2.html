<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR_CODE_GENERATOR</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.6/axios.min.js"></script>
  </head>
  <body>
    <h1 id="greeting"></h1>
    <input
      type="text"
      name="url"
      id="url"
      placeholder="Enter URL to generate QR code"
    />
    <button onclick="generateQRCode()">Generate QR Code</button>
    <img id="qrImage" src="" alt="QR Code will appear here" style="display: none;" />
  </body>
  <script>
    getUserName();
    async function getUserName() {
      const token = localStorage.getItem("token");

      if (token) {
        const response = await axios.get("http://localhost:3000/me", {
          headers: {
            token: token,
          },
        });
        document.getElementById("greeting").innerHTML =
          "Hello " + response.data.username;
      }
    }

    async function generateQRCode() {
      const url = document.getElementById("url").value;
      if (!url) {
        alert("Please enter a URL");
        return;
      }
      const response = await axios.get("http://localhost:3000/generate-qr", {
        params: { url: url }
      });
      document.getElementById("qrImage").src = response.data.qr;
      qrImage.style.display = "block";
    }
  </script>
</html>
